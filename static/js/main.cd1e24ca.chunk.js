(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,n){e.exports=n.p+"static/media/logo.37738632.png"},42:function(e,t,n){e.exports=n(79)},47:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),i=n.n(c),o=(n(47),n(9)),u=n(14),l=n(13),s=n.n(l),d=n(16),p=n(3),m=n(4),f=n(6),h=n(5),g=n(7),v=n(1),b=n(2),E="https://bikewise.org:443/api/v2/",O="incidents";function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.occurredBefore,n=e.occurredAfter,a=e.query,r=e.path,c=void 0===r?O:r,i=e.incidentType,o=e.id,u=o?"".concat(E).concat(c,"/").concat(o):"".concat(E).concat(c,"?proximity=berlin&proximity_square=100").concat(t?"&occurred_before=".concat(t):"").concat(n?"&occurred_after=".concat(n):"").concat(a?"&query=".concat(a):"").concat(i?"&incident_type=".concat(i):"");return fetch(u,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){if(200!==e.status)throw new Error("ERROR response status incorrect : ".concat(e.status));return e.json()}).catch(function(e){throw new Error("ERROR: ".concat(e))})}var j=n(34),x=n(12),P=n.n(x);function k(){var e=Object(v.a)(["\n  color: red;\n  font-weight: bold;\n"]);return k=function(){return e},e}function w(){var e=Object(v.a)(["\n  display: inline-block;\n  margin-right: 10px;\n  margin-top: 20px;\n"]);return w=function(){return e},e}function C(){var e=Object(v.a)(["\n  display: inline-block;\n  margin-right: 10px;\n  margin-top: 20px;\n"]);return C=function(){return e},e}function D(){var e=Object(v.a)(["\n  display: inline-block;\n  margin-right: 10px;\n  margin-top: 20px;\n"]);return D=function(){return e},e}function S(){var e=Object(v.a)(["\n  display: inline-block;\n  margin-right: 10px;\n  margin-top: 20px;\n"]);return S=function(){return e},e}function F(){var e=Object(v.a)(["text-align: center;"]);return F=function(){return e},e}var T=b.a.div(F()),L=b.a.input(S()),M=b.a.div(D()),R=b.a.div(C()),A=b.a.button(w()),_=b.a.div(k()),q=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},n.onChangeData=function(e){n.setState(Object(j.a)({},e.target.name,e.target.value))},n.onSubmit=function(e){e.preventDefault();var t,a=n.props.onFind,r=n.state,c=r.dateFrom,i=r.dateTo,o=r.query;c&&!P()(c).isValid()&&(t="date From is not valid"),i&&!P()(i).isValid()&&(t="date To is not valid"),c&&i&&c>i&&(t='"From" date is greater than date "To"'),t||a({dateFrom:P()(c).unix(),dateTo:P()("".concat(i," 24:00:00")).unix(),query:o}),n.setState({errorMessage:t})},n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.isDataLoading,t=this.state.errorMessage;return r.a.createElement(M,null,r.a.createElement(T,{onSubmit:this.onSubmit},r.a.createElement(L,{type:"text",placeholder:"Search case descriptions",name:"query",maxLength:30,onChange:this.onChangeData}),r.a.createElement(M,null,r.a.createElement(R,null,r.a.createElement("div",null,"From"),r.a.createElement("input",{type:"date",placeholder:"from",name:"dateFrom",onChange:this.onChangeData})),r.a.createElement(R,null,r.a.createElement("div",null,"To"),r.a.createElement("input",{type:"date",placeholder:"to",name:"dateTo",onChange:this.onChangeData}))),r.a.createElement(A,{type:"submit",disabled:e,onClick:this.onSubmit},"Find cases")),t&&r.a.createElement(_,null,t))}}]),t}(a.PureComponent);function I(){var e=Object(v.a)(["color: red;"]);return I=function(){return e},e}var B=b.a.p(I()),Y=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(B,null,"Ooops, something went wrong"))}}]),t}(a.PureComponent),N=n(20);function U(){var e=Object(v.a)(["margin-top: 5px;"]);return U=function(){return e},e}function W(){var e=Object(v.a)(["display: inline-block;"]);return W=function(){return e},e}function z(){var e=Object(v.a)(["\n  display: grid;\n  grid-template-columns: 100px auto;\n  grid-column-gap: 10px;\n  border: solid 2px darkgray;\n  padding: 10px;\n  \n  @media screen and (max-width: 500px) {\n    display: block;\n  }\n"]);return z=function(){return e},e}var J=b.a.div(z()),K=b.a.div(W()),V=b.a.p(U()),X=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.incident,n=e.incident,a=n.title,c=n.description,i=n.occurred_at,o=n.updated_at,u=n.media,l=(u=void 0===u?{}:u).image_url_thumb,s=n.address,d=n.id;return r.a.createElement(J,null,r.a.createElement("div",null,l&&r.a.createElement("img",{width:100,height:100,alt:"bike",src:l})),r.a.createElement(K,null,r.a.createElement(N.a,{to:{pathname:"case/".concat(d),state:{incident:t}}},r.a.createElement("div",null,a)),r.a.createElement(V,null,c),r.a.createElement("div",null,r.a.createElement("strong",null,"Date of the theft:")," ".concat(P.a.unix(i).format("ddd MMM D YYYY"))),r.a.createElement("div",null,r.a.createElement("strong",null,"Report date:"),": ".concat(P.a.unix(o).format("ddd MMM D YYYY"))),r.a.createElement("div",null,r.a.createElement("strong",null,"Location:")," ".concat(s))))}}]),t}(a.PureComponent),G=10;function Q(){var e=Object(v.a)(["\n  text-align: center;\n"]);return Q=function(){return e},e}function Z(){var e=Object(v.a)(["\n  margin: 10px;\n"]);return Z=function(){return e},e}function H(){var e=Object(v.a)(["\n  display: grid;\n  grid-template-columns: 3fr 9fr 3fr;\n  grid-column-gap: 10px;\n"]);return H=function(){return e},e}var $=b.a.div(H()),ee=b.a.button(Z()),te=b.a.div(Q()),ne=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).openFirstPage=function(){(0,n.props.openPage)(1)},n.openPreviousPage=function(){var e=n.props,t=e.currentPage;(0,e.openPage)(t-1)},n.openNextPage=function(){var e=n.props,t=e.currentPage;(0,e.openPage)(t+1)},n.openLastPage=function(){(0,n.props.openPage)(n.getTotalPages())},n.getTotalPages=function(){var e=n.props.totalRecords;return Math.ceil(e/G)},n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.currentPage,n=e.openPage,a=new Array(this.getTotalPages()).fill(0).map(function(e,t){return t+1});return r.a.createElement($,null,r.a.createElement(te,null,r.a.createElement(ee,{type:"button",name:"button-first",onClick:this.openFirstPage,disabled:1===t},"<< First"),r.a.createElement(ee,{type:"button",name:"button-prev",onClick:this.openPreviousPage,disabled:1===t},"< Prev")),r.a.createElement(te,null,a.map(function(e){return r.a.createElement(ee,{type:"button",onClick:function(){return n(e)},disabled:t===e,key:e},e)})),r.a.createElement(te,null,r.a.createElement(ee,{type:"button",name:"button-next",onClick:this.openNextPage,disabled:t===a.length},"Next >"),r.a.createElement(ee,{type:"button",name:"button-last",onClick:this.openLastPage,disabled:t===a.length},"Last >>")))}}]),t}(a.PureComponent);function ae(){var e=Object(v.a)(["margin: 10px;"]);return ae=function(){return e},e}function re(){var e=Object(v.a)(["\n    display: grid;\n    justify-items: end;\n    margin-top: 40px;\n"]);return re=function(){return e},e}var ce=b.a.div(re()),ie=b.a.div(ae()),oe=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(c)))).listWithPagination=function(){var e=n.props,t=e.openPage,a=e.currentPage,c=e.incidents;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,null,"total: ".concat(c.length)),c.filter(function(e,t){return G*(a-1)<=t&&t<G*a}).map(function(e){return r.a.createElement(ie,{key:e.id},r.a.createElement(X,{incident:e}))}),r.a.createElement(ne,{currentPage:a,openPage:t,totalRecords:c.length}))},n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.incidents;return r.a.createElement("div",null,e.length>0?this.listWithPagination():r.a.createElement("p",null,"No results"))}}]),t}(a.PureComponent),ue=n(39),le=n.n(ue);function se(){var e=Object(v.a)(["align-self: center;"]);return se=function(){return e},e}function de(){var e=Object(v.a)(["\n  display: grid;\n  grid-template-columns: 100px auto;\n"]);return de=function(){return e},e}var pe=b.a.div(de()),me=b.a.div(se()),fe=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(pe,null,r.a.createElement(me,null,r.a.createElement("img",{src:le.a,alt:"logo"})),r.a.createElement("div",null,r.a.createElement("h1",null,"Police Department of Berlin"),r.a.createElement("h2",null,"Stolen bikes")))}}]),t}(a.PureComponent);function he(){var e=Object(v.a)(["margin: 50px;"]);return he=function(){return e},e}var ge=b.a.div(he()),ve=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(c)))).state={isDataError:!1,isDataLoading:!1,incidents:[],currentPage:1},n.getData=Object(d.a)(s.a.mark(function e(){var t,a,r,c,i,o,u=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},a=t.dateFrom,r=t.dateTo,c=t.query,n.setState({isDataError:!1,isDataLoading:!0}),e.prev=2,e.next=5,y({occurredAfter:a,occurredBefore:r,query:c});case 5:i=e.sent,o=i.incidents,n.isComponentMounted&&n.setState({incidents:o}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),n.isComponentMounted&&n.setState({isDataError:!0});case 13:return e.prev=13,n.isComponentMounted&&n.setState({isDataLoading:!1}),e.finish(13);case 16:case"end":return e.stop()}},e,null,[[2,10,13,16]])})),n.onFind=function(){var e=Object(d.a)(s.a.mark(function e(t){var a,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.dateFrom,r=t.dateTo,c=t.query,n.setState({currentPage:1}),e.next=4,n.getData({dateFrom:a,dateTo:r,query:c});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.openPage=function(e){n.setState({currentPage:e}),window.scrollTo(0,0)},n.dataLayout=function(){var e=n.state,t=e.isDataError,a=e.incidents,c=e.currentPage,i=e.isDataLoading;return t?r.a.createElement(Y,null):i?r.a.createElement("p",null,"Loading ... "):r.a.createElement(oe,{incidents:a,currentPage:c,openPage:n.openPage})},n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.isComponentMounted=!0,e.next=3,this.getData();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.isComponentMounted=!1}},{key:"render",value:function(){var e=this.state.isDataLoading;return r.a.createElement(ge,null,r.a.createElement(fe,null),r.a.createElement(q,{onFind:this.onFind,isDataLoading:e}),this.dataLayout())}}]),t}(a.PureComponent),be=n(40),Ee=n.n(be);function Oe(){var e=Object(v.a)(["\n    color: red;\n    font-size: 14px;\n    font-weight: bold;\n    background-color: rgba(255, 0, 0, 0.1);\n    padding: 4px;\n    border-radius: 4px;\n    display: inline-block;\n"]);return Oe=function(){return e},e}function ye(){var e=Object(v.a)(["\n  height: 100%;\n  width: 100%;\n"]);return ye=function(){return e},e}var je=b.a.div(ye()),xe=b.a.div(Oe()),Pe=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.center;return r.a.createElement(je,null,r.a.createElement(Ee.a,{bootstrapURLKeys:{key:"AIzaSyB23QiArAUU74ItBhbCBnc7gmBKXhdXumc"},defaultCenter:e,defaultZoom:15},r.a.createElement(xe,null,"* Incident location")))}}]),t}(a.Component);function ke(){var e=Object(v.a)(["\n    height: 400px;\n    margin: 30px;\n"]);return ke=function(){return e},e}function we(){var e=Object(v.a)(["margin: 50px;"]);return we=function(){return e},e}var Ce=b.a.div(we()),De=b.a.div(ke()),Se=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={incident:{}},n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(s.a.mark(function e(){var t,n,a,r,c,i,o,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.match.params.id,a=t.location.state,r=(a=void 0===a?{}:a).incident,!(c=r)){e.next=8;break}this.setState({incident:r}),e.next=19;break;case 8:return e.prev=8,e.next=11,y({id:n});case 11:i=e.sent,this.setState({incident:i.incident}),c=i.incident,e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(8),new Error("ERROR call api with caseId : ".concat(n));case 19:return e.next=21,y({path:"locations",occurredBefore:c.occurred_at+1,occurredAfter:c.occurred_at,incidentType:c.type.toLowerCase()});case 21:o=e.sent,(u=o.features.find(function(e){return e.properties.id===parseInt(n,10)}))&&this.setState({mapCoordinates:u.geometry.coordinates});case 24:case"end":return e.stop()}},e,this,[[8,16]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.incident,n=t.title,a=t.updated_at,c=t.description,i=t.address,o=e.mapCoordinates;return r.a.createElement(Ce,null,r.a.createElement(fe,null),r.a.createElement("div",null,n),r.a.createElement("div",null,"Stolen ".concat(P.a.unix(a).format("llll")," at ").concat(i)),o&&r.a.createElement(De,null,r.a.createElement(Pe,{center:{lng:o[0],lat:o[1]}})),r.a.createElement("h2",null,"DESCRIPTION OF INCIDENT"),r.a.createElement("div",null,c))}}]),t}(a.PureComponent);Se.defaultProps={location:{},match:{}};var Fe=function(){return r.a.createElement(u.c,{history:Object(o.a)()},r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",component:ve}),r.a.createElement(u.b,{exact:!0,path:"/case/:id?",component:Se}),r.a.createElement(u.a,{to:"/"})))};i.a.render(r.a.createElement(Fe,null),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.cd1e24ca.chunk.js.map