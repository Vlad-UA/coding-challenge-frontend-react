{"version":3,"sources":["assets/logo.png","constants/url.js","utils/call-api.js","components/SearchPanel/SearchPanel.js","components/ErrorInfo/ErrorInfo.js","components/IncidentCard/IncidentCard.js","constants/pages.js","components/Pagination/Pagination.js","components/IncidentList/IncidentList.js","components/Header/Header.js","components/Main/Main.js","components/Case/Map/Map.js","components/Case/Case.js","components/App.js","index.js"],"names":["module","exports","__webpack_require__","p","DOMAIN_PATH_URL","INCIDENTS_PATH_URL","callApi","_ref","arguments","length","undefined","occurredBefore","occurredAfter","query","_ref$path","path","incidentType","id","url","concat","fetch","method","headers","Accept","Content-Type","then","response","status","Error","json","catch","error","Form","styled","div","_templateObject","DescriptionSearchField","input","_templateObject2","WrapperDateFields","_templateObject3","DateWrapper","_templateObject4","SubmitButton","button","_templateObject5","ErrorMessage","_templateObject6","SearchPanel","state","onChangeData","e","_this","setState","Object","defineProperty","target","name","value","onSubmit","event","preventDefault","errorMessage","onFind","props","_this$state","dateFrom","dateTo","moment","isValid","unix","isDataLoading","this","react_default","a","createElement","type","placeholder","maxLength","onChange","disabled","onClick","PureComponent","Message","ErrorInfo_templateObject","ErrorInfo","Wrapper","IncidentCard_templateObject","Data","IncidentCard_templateObject2","Description","IncidentCard_templateObject3","IncidentCard","_this$props","incident","_this$props$incident","title","description","occurred_at","updated_at","_this$props$incident$","media","image_url_thumb","address","width","height","alt","src","react_router_dom","to","pathname","format","CASES_ON_PAGE","Pagination_templateObject","Button","Pagination_templateObject2","Columns","Pagination_templateObject3","Pagination","openFirstPage","openPage","openPreviousPage","currentPage","openNextPage","_this$props2","openLastPage","getTotalPages","totalRecords","Math","ceil","_this$props3","pages","Array","fill","map","v","i","Pagination_Wrapper","pageIndex","key","TotalIncidents","IncidentList_templateObject","IncidentCardWrapper","IncidentList_templateObject2","IncidentList","listWithPagination","incidents","Fragment","filter","element","index","IncidentCard_IncidentCard","Pagination_Pagination","Header_templateObject","Img","Header_templateObject2","Header","Header_Wrapper","logo","Main_templateObject","Main","isDataError","getData","_callee","_ref2","_ref3","_args","regenerator_default","wrap","_context","prev","next","sent","isComponentMounted","t0","finish","stop","_callee2","_ref4","_context2","pageNumber","window","scrollTo","dataLayout","ErrorInfo_ErrorInfo","IncidentList_IncidentList","Main_Wrapper","Header_Header","SearchPanel_SearchPanel","Map_templateObject","IncidentPointer","Map_templateObject2","Map","center","Map_Wrapper","lib_default","bootstrapURLKeys","defaultCenter","defaultZoom","Component","Case_templateObject","MapWrapper","Case_templateObject2","Case","match","params","location","incidentBase","data","toLowerCase","locations","incidentLocation","features","find","feature","properties","parseInt","mapCoordinates","geometry","coordinates","_this$state$incident","updatedAt","Case_Wrapper","Map_Map","lng","lat","defaultProps","App","react_router","history","createBrowserHistory","exact","component","ReactDOM","render","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.ddde9137.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.37738632.png\";","export const DOMAIN_PATH_URL = 'https://bikewise.org:443/api/v2/';\nexport const INCIDENTS_PATH_URL = 'incidents';\nexport const LOCATIONS_PATH_URL = 'locations';\n","// Constants\nimport { DOMAIN_PATH_URL, INCIDENTS_PATH_URL } from '../constants/url';\n\nexport default function callApi({\n  occurredBefore,\n  occurredAfter,\n  query,\n  path = INCIDENTS_PATH_URL,\n  incidentType,\n  id,\n} = {}) {\n  const url = id\n    ? `${DOMAIN_PATH_URL}${path}/${id}`\n    : `${DOMAIN_PATH_URL}${path}?proximity=berlin&proximity_square=100${occurredBefore ? `&occurred_before=${occurredBefore}` : ''}${occurredAfter ? `&occurred_after=${occurredAfter}` : ''}${query ? `&query=${query}` : ''}${incidentType ? `&incident_type=${incidentType}` : ''}`;\n\n  return fetch(url, {\n    method: 'GET',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n  })\n    .then((response) => {\n      if (response.status !== 200) {\n        throw new Error(`ERROR response status incorrect : ${response.status}`);\n      }\n\n      return response.json();\n    })\n    .catch((error) => {\n      throw new Error(`ERROR: ${error}`);\n    });\n}\n","// Core\nimport React, { PureComponent } from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\n\n// Instruments\nimport styled from 'styled-components';\n\nconst Form = styled.div`text-align: center;`;\n\nconst DescriptionSearchField = styled.input`\n  display: inline-block;\n  margin-right: 10px;\n  margin-top: 20px;\n`;\n\nconst WrapperDateFields = styled.div`\n  display: inline-block;\n  margin-right: 10px;\n  margin-top: 20px;\n`;\n\nconst DateWrapper = styled.div`\n  display: inline-block;\n  margin-right: 10px;\n  margin-top: 20px;\n`;\n\nconst SubmitButton = styled.button`\n  display: inline-block;\n  margin-right: 10px;\n  margin-top: 20px;\n`;\n\nconst ErrorMessage = styled.div`\n  color: red;\n  font-weight: bold;\n`;\n\nexport default class SearchPanel extends PureComponent {\n  state = {};\n\n  onChangeData = (e) => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  onSubmit = (event) => {\n    event.preventDefault();\n\n    const { onFind } = this.props;\n    const { dateFrom, dateTo, query } = this.state;\n\n    let errorMessage;\n\n    if (dateFrom && !moment(dateFrom).isValid()) {\n      errorMessage = 'date From is not valid';\n    }\n\n    if (dateTo && !moment(dateTo).isValid()) {\n      errorMessage = 'date To is not valid';\n    }\n\n    if (dateFrom && dateTo && dateFrom > dateTo) {\n      errorMessage = '\"From\" date is greater than date \"To\"';\n    }\n\n    if (!errorMessage) {\n      onFind({\n        dateFrom: moment(dateFrom).unix(),\n        dateTo: moment(`${dateTo} 24:00:00`).unix(),\n        query,\n      });\n    }\n\n    this.setState({ errorMessage });\n  };\n\n  render() {\n    const { isDataLoading } = this.props;\n    const { errorMessage } = this.state;\n\n    return (\n      <WrapperDateFields>\n        <Form onSubmit={this.onSubmit}>\n          <DescriptionSearchField type=\"text\" placeholder=\"Search case descriptions\" name=\"query\" maxLength={30} onChange={this.onChangeData} />\n\n          <WrapperDateFields>\n            <DateWrapper>\n              <div>From</div>\n              <input type=\"date\" placeholder=\"from\" name=\"dateFrom\" onChange={this.onChangeData} />\n            </DateWrapper>\n\n            <DateWrapper>\n              <div>To</div>\n              <input type=\"date\" placeholder=\"to\" name=\"dateTo\" onChange={this.onChangeData} />\n            </DateWrapper>\n          </WrapperDateFields>\n\n          <SubmitButton type=\"submit\" disabled={isDataLoading} onClick={this.onSubmit}>Find cases</SubmitButton>\n        </Form>\n        {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n      </WrapperDateFields>\n    );\n  }\n}\n\nSearchPanel.propTypes = {\n  isDataLoading: PropTypes.bool.isRequired,\n  onFind: PropTypes.func.isRequired,\n};\n","// Core\nimport React, { PureComponent } from 'react';\n\n// Instruments\nimport styled from 'styled-components';\n\nconst Message = styled.p`color: red;`;\n\nexport default class ErrorInfo extends PureComponent {\n  render() {\n    return (\n      <div>\n        <Message>Ooops, something went wrong</Message>\n      </div>\n    );\n  }\n}\n","// Core\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from 'react-router-dom';\n\n// Instruments\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-template-columns: 100px auto;\n  grid-column-gap: 10px;\n  border: solid 2px darkgray;\n  padding: 10px;\n  \n  @media screen and (max-width: 500px) {\n    display: block;\n  }\n`;\n\nconst Data = styled.div`display: inline-block;`;\n\nconst Description = styled.p`margin-top: 5px;`;\n\nexport default class IncidentCard extends PureComponent {\n  render() {\n    const {\n      incident, incident: {\n        title, description, occurred_at, updated_at, media: { image_url_thumb } = {}, address, id,\n      },\n    } = this.props;\n\n    return (\n      <Wrapper>\n        <div>\n          {\n            image_url_thumb && <img width={100} height={100} alt=\"bike\" src={image_url_thumb} />\n          }\n        </div>\n        <Data>\n          <Link to={{ pathname: `case/${id}`, state: { incident } }}><div>{title}</div></Link>\n          <Description>{description}</Description>\n          <div>\n            <strong>Date of the theft:</strong>\n            {` ${moment.unix(occurred_at).format('ddd MMM D YYYY')}`}\n          </div>\n          <div>\n            <strong>Report date:</strong>\n            {`: ${moment.unix(updated_at).format('ddd MMM D YYYY')}`}\n          </div>\n          <div>\n            <strong>Location:</strong>\n            {` ${address}`}\n          </div>\n        </Data>\n      </Wrapper>\n    );\n  }\n}\n\nIncidentCard.propTypes = {\n  incident: PropTypes.shape({\n    id: PropTypes.number,\n    title: PropTypes.string,\n    address: PropTypes.string,\n    description: PropTypes.string,\n    occurred_at: PropTypes.number,\n    updated_at: PropTypes.number,\n    media: PropTypes.shape({\n      image_url_thumb: PropTypes.string,\n    }),\n  }).isRequired,\n};\n","export const CASES_ON_PAGE = 10;\n","// Core\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\n// Instruments\nimport styled from 'styled-components';\n\n// Constants\nimport { CASES_ON_PAGE } from '../../constants/pages';\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-template-columns: 3fr 9fr 3fr;\n  grid-column-gap: 10px;\n`;\n\nconst Button = styled.button`\n  margin: 10px;\n`;\n\nconst Columns = styled.div`\n  text-align: center;\n`;\n\nexport default class Pagination extends PureComponent {\n  openFirstPage = () => {\n    const { openPage } = this.props;\n    openPage(1);\n  };\n\n  openPreviousPage = () => {\n    const { currentPage, openPage } = this.props;\n    openPage(currentPage - 1);\n  };\n\n  openNextPage = () => {\n    const { currentPage, openPage } = this.props;\n    openPage(currentPage + 1);\n  };\n\n  openLastPage = () => {\n    const { openPage } = this.props;\n    openPage(this.getTotalPages());\n  };\n\n  getTotalPages = () => {\n    const { totalRecords } = this.props;\n    return Math.ceil(totalRecords / CASES_ON_PAGE);\n  };\n\n  render() {\n    const { currentPage, openPage } = this.props;\n    const pages = new Array(this.getTotalPages()).fill(0).map((v, i) => i + 1);\n\n    return (\n      <Wrapper>\n        <Columns>\n          <Button type=\"button\" name=\"button-first\" onClick={this.openFirstPage} disabled={currentPage === 1}>{'<< First'}</Button>\n          <Button type=\"button\" name=\"button-prev\" onClick={this.openPreviousPage} disabled={currentPage === 1}>{'< Prev'}</Button>\n        </Columns>\n\n        <Columns>\n          { pages.map(pageIndex => <Button type=\"button\" onClick={() => openPage(pageIndex)} disabled={currentPage === pageIndex} key={pageIndex}>{pageIndex}</Button>) }\n        </Columns>\n\n        <Columns>\n          <Button type=\"button\" name=\"button-next\" onClick={this.openNextPage} disabled={currentPage === pages.length}>{'Next >'}</Button>\n          <Button type=\"button\" name=\"button-last\" onClick={this.openLastPage} disabled={currentPage === pages.length}>{'Last >>'}</Button>\n        </Columns>\n      </Wrapper>\n    );\n  }\n}\n\nPagination.propTypes = {\n  totalRecords: PropTypes.number.isRequired,\n  openPage: PropTypes.func.isRequired,\n  currentPage: PropTypes.number.isRequired,\n};\n","// Core\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\n// Instruments\nimport styled from 'styled-components';\n\n// Components\nimport IncidentCard from '../IncidentCard/IncidentCard';\nimport Pagination from '../Pagination/Pagination';\n\n// Constants\nimport { CASES_ON_PAGE } from '../../constants/pages';\n\nconst TotalIncidents = styled.div`\n    display: grid;\n    justify-items: end;\n    margin-top: 40px;\n`;\n\nconst IncidentCardWrapper = styled.div`margin: 10px;`;\n\nexport default class IncidentList extends PureComponent {\n  listWithPagination = () => {\n    const { openPage, currentPage, incidents } = this.props;\n\n    return (\n      <>\n        <TotalIncidents>{`total: ${incidents.length}`}</TotalIncidents>\n        {incidents\n          // eslint-disable-next-line\n          .filter((element, index) => (CASES_ON_PAGE * (currentPage - 1) <= index) && (index < CASES_ON_PAGE * currentPage))\n          .map(\n            incident => (\n              <IncidentCardWrapper key={incident.id}>\n                <IncidentCard incident={incident} />\n              </IncidentCardWrapper>\n            ),\n          )}\n        <Pagination currentPage={currentPage} openPage={openPage} totalRecords={incidents.length} />\n      </>\n    );\n  };\n\n  render() {\n    const { incidents } = this.props;\n\n    return (\n      <div>\n        {\n          incidents.length > 0 ? this.listWithPagination() : <p>No results</p>\n        }\n      </div>\n    );\n  }\n}\n\nIncidentList.propTypes = {\n  incidents: PropTypes.arrayOf(PropTypes.object).isRequired,\n  currentPage: PropTypes.number.isRequired,\n  openPage: PropTypes.func.isRequired,\n};\n","// Core\nimport React, { PureComponent } from 'react';\n\n// Instruments\nimport styled from 'styled-components';\nimport logo from '../../assets/logo.png';\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-template-columns: 100px auto;\n`;\n\nconst Img = styled.div`align-self: center;`;\n\nexport default class Header extends PureComponent {\n  render() {\n    return (\n      <Wrapper>\n        <Img>\n          <img src={logo} alt=\"logo\" />\n        </Img>\n        <div>\n          <h1>Police Department of Berlin</h1>\n          <h2>Stolen bikes</h2>\n        </div>\n      </Wrapper>\n    );\n  }\n}\n","// Core\nimport React, { PureComponent } from 'react';\n\n// Instruments\nimport styled from 'styled-components';\n\n// Utils\nimport callApi from '../../utils/call-api';\n\n// Components\nimport SearchPanel from '../SearchPanel/SearchPanel';\nimport ErrorInfo from '../ErrorInfo/ErrorInfo';\nimport IncidentList from '../IncidentList/IncidentList';\nimport Header from '../Header/Header';\n\nconst Wrapper = styled.div`margin: 50px;`;\n\nexport default class Main extends PureComponent {\n  state = {\n    isDataError: false,\n    isDataLoading: false,\n    incidents: [],\n    currentPage: 1,\n  };\n\n  async componentDidMount() {\n    this.isComponentMounted = true;\n\n    await this.getData();\n  }\n\n  componentWillUnmount() {\n    this.isComponentMounted = false;\n  }\n\n  getData = async ({ dateFrom, dateTo, query } = {}) => {\n    this.setState({\n      isDataError: false, isDataLoading: true,\n    });\n\n    try {\n      const { incidents } = await callApi(\n        { occurredAfter: dateFrom, occurredBefore: dateTo, query },\n      );\n      if (this.isComponentMounted) {\n        this.setState({ incidents });\n      }\n    } catch (error) {\n      if (this.isComponentMounted) {\n        this.setState({ isDataError: true });\n      }\n    } finally {\n      if (this.isComponentMounted) {\n        this.setState({ isDataLoading: false });\n      }\n    }\n  };\n\n  onFind = async ({ dateFrom, dateTo, query }) => {\n    this.setState({ currentPage: 1 });\n    await this.getData({ dateFrom, dateTo, query });\n  };\n\n  openPage = (pageNumber) => {\n    this.setState({ currentPage: pageNumber });\n    window.scrollTo(0, 0);\n  };\n\n  dataLayout = () => {\n    const {\n      isDataError, incidents, currentPage, isDataLoading,\n    } = this.state;\n\n    if (isDataError) {\n      return <ErrorInfo />;\n    } if (isDataLoading) {\n      return <p>Loading ... </p>;\n    }\n    return (\n      <IncidentList\n        incidents={incidents}\n        currentPage={currentPage}\n        openPage={this.openPage}\n      />\n    );\n  };\n\n  render() {\n    const { isDataLoading } = this.state;\n\n    return (\n      <Wrapper>\n        <Header />\n\n        <SearchPanel onFind={this.onFind} isDataLoading={isDataLoading} />\n\n        {this.dataLayout()}\n        <p>v 1.0.0</p>\n      </Wrapper>\n    );\n  }\n}\n","/* eslint-env jest */\n\nimport React, { Component } from 'react';\nimport GoogleMapReact from 'google-map-react';\nimport PropTypes from 'prop-types';\n\n// Instruments\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n  height: 100%;\n  width: 100%;\n`;\n\nconst IncidentPointer = styled.div`\n    color: red;\n    font-size: 14px;\n    font-weight: bold;\n    background-color: rgba(255, 0, 0, 0.1);\n    padding: 4px;\n    border-radius: 4px;\n    display: inline-block;\n`;\n\nexport default class Map extends Component {\n  render() {\n    const { center } = this.props;\n\n    return (\n      <Wrapper>\n        <GoogleMapReact\n          bootstrapURLKeys={{ key: 'AIzaSyB23QiArAUU74ItBhbCBnc7gmBKXhdXumc' }}\n          defaultCenter={center}\n          defaultZoom={15}\n        >\n          <IncidentPointer>* Incident location</IncidentPointer>\n        </GoogleMapReact>\n      </Wrapper>\n    );\n  }\n}\n\nMap.propTypes = {\n  center: PropTypes.shape({\n    lat: PropTypes.number,\n    lng: PropTypes.number,\n  }).isRequired,\n};\n","// Core\nimport React, { PureComponent } from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\n\n// Instruments\nimport styled from 'styled-components';\n\n// Components\nimport Header from '../Header/Header';\nimport Map from './Map/Map';\n\n// Utils\nimport callApi from '../../utils/call-api';\n\nconst Wrapper = styled.div`margin: 50px;`;\n\nconst MapWrapper = styled.div`\n    height: 400px;\n    margin: 30px;\n`;\n\nexport default class Case extends PureComponent {\n  state = {\n    incident: {},\n  };\n\n  async componentDidMount() {\n    const {\n      match: { params: { id } },\n      location: { state: { incident } = {} },\n    } = this.props;\n\n    let incidentBase = incident;\n\n    if (incidentBase) {\n      this.setState({ incident });\n    } else {\n      try {\n        const data = await callApi({ id });\n        this.setState({ incident: data.incident });\n        incidentBase = data.incident;\n      } catch (error) {\n        throw new Error(`ERROR call api with caseId : ${id}`);\n      }\n    }\n\n    const locations = await callApi({\n      path: 'locations',\n      occurredBefore: incidentBase.occurred_at + 1,\n      occurredAfter: incidentBase.occurred_at,\n      incidentType: incidentBase.type.toLowerCase(),\n    });\n\n    const incidentLocation = locations.features.find(\n      feature => feature.properties.id === parseInt(id, 10),\n    );\n\n    if (incidentLocation) {\n      this.setState({ mapCoordinates: incidentLocation.geometry.coordinates });\n    }\n  }\n\n  render() {\n    const {\n      incident: {\n        title, updated_at: updatedAt, description, address,\n      },\n      mapCoordinates,\n    } = this.state;\n\n    return (\n      <Wrapper>\n        <Header />\n        <div>{title}</div>\n        <div>{`Stolen ${moment.unix(updatedAt).format('llll')} at ${address}`}</div>\n        {\n          mapCoordinates\n            && (\n            <MapWrapper>\n              <Map center={{ lng: mapCoordinates[0], lat: mapCoordinates[1] }} />\n            </MapWrapper>\n            )\n        }\n        <h2>DESCRIPTION OF INCIDENT</h2>\n        <div>{description}</div>\n      </Wrapper>\n    );\n  }\n}\n\nCase.propTypes = {\n  location: PropTypes.shape({\n    state: PropTypes.shape({\n      incident: PropTypes.object,\n    }),\n  }),\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string,\n    }),\n  }),\n};\n\nCase.defaultProps = {\n  location: {},\n  match: {},\n};\n","// Core\nimport React from 'react';\nimport { createBrowserHistory } from 'history';\nimport {\n  Router, Route, Switch, Redirect,\n} from 'react-router-dom';\n\n// Components\nimport Main from './Main/Main';\nimport Case from './Case/Case';\n\nconst App = () => (\n  <Router history={createBrowserHistory()}>\n    <Switch>\n      <Route exact path=\"/\" component={Main} />\n      <Route exact path=\"/case/:id?\" component={Case} />\n      <Redirect to=\"/\" />\n    </Switch>\n  </Router>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}